<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AiæŠ•èµ„ç»„åˆ</title>
    <script src="config.js"></script>
    <script src="js/sw-helper.js"></script>
    <script src="js/cache-helper.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/socket.io/4.0.0/socket.io.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #0d1117;
            color: #c9d1d9;
            line-height: 1.6;
        }
        .header {
            background: #161b22;
            color: #c9d1d9;
            padding: 20px 40px;
            border-bottom: 1px solid #21262d;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header h1 {
            font-size: 26px;
            font-weight: 600;
            color: #f0f6fc;
            margin: 0;
            text-align: left;
        }
        .header-nav {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex: 1;
        }
        .header-nav a {
            color: #8b949e;
            text-decoration: none;
            font-weight: 500;
            font-size: 20px;
            padding: 8px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        .header-nav a:hover, .header-nav a.active {
            border-bottom-color: #f0883e;
            color: #f0883e;
        }
        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 40px;
        }
        .filters {
            background: #161b22;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #21262d;
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        .filter-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .filter-group label {
            font-weight: 500;
            color: #c9d1d9;
            min-width: 80px;
        }
        .filter-group select, .filter-group input {
            padding: 8px 12px;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 4px;
            font-size: 14px;
            color: #c9d1d9;
            min-width: 150px;
        }
        .filter-group select option {
            background: #0d1117;
            color: #c9d1d9;
        }
        .filter-group button {
            padding: 8px 20px;
            background: #238636;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }
        .filter-group button:hover {
            background: #2ea043;
        }
        .section {
            background: #161b22;
            border-radius: 8px;
            border: 1px solid #21262d;
            margin-bottom: 30px;
            overflow: hidden;
        }
        .section-header {
            padding: 20px;
            background: #161b22;
            border-bottom: 1px solid #21262d;
        }
        .section-header h2 {
            font-size: 20px;
            font-weight: 600;
            color: #f0f6fc;
        }
        .table-container {
            overflow-x: auto;
            max-height: 600px;
            overflow-y: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        thead {
            background: #161b22;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        th {
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            color: #f0f6fc;
            border-bottom: 2px solid #21262d;
        }
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #21262d;
            color: #c9d1d9;
        }
        tbody tr:hover {
            background: #1c2128;
        }
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        .text-right .badge {
            float: right;
        }
        .badge.buy {
            background: #1f6f3a;
            color: #7ee787;
        }
        .badge.sell {
            background: #801f2f;
            color: #ff7b72;
        }
        .badge.profit {
            background: #1f6f3a;
            color: #7ee787;
        }
        .badge.loss {
            background: #801f2f;
            color: #ff7b72;
        }
        .text-right {
            text-align: right;
        }
        .text-center {
            text-align: center;
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #8b949e;
        }
        .error {
            background: #801f2f;
            color: #ff7b72;
            padding: 15px;
            border-radius: 4px;
            margin: 20px;
        }
        .empty {
            text-align: center;
            padding: 40px;
            color: #8b949e;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: #161b22;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #21262d;
        }
        .stat-card .label {
            font-size: 12px;
            color: #8b949e;
            margin-bottom: 8px;
        }
        .stat-card .value {
            font-size: 24px;
            font-weight: 600;
            color: #f0f6fc;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AiæŠ•èµ„ç»„åˆ</h1>
        <div class="header-nav">
            <a href="index.html">å®æ—¶æ”¶ç›ŠåŠAiå†³ç­–æ—¥å¿—</a>
            <a href="portfolio.html" class="active">AiæŠ•èµ„ç»„åˆ</a>
        </div>
    </div>

    <div class="container">
    <div class="filters">
        <div class="filter-group">
                <label>æ¨¡å‹ï¼š</label>
            <select id="modelFilter">
                    <option value="">å…¨éƒ¨æ¨¡å‹</option>
            </select>
        </div>
        <div class="filter-group">
                <label>è‚¡ç¥¨ä»£ç ï¼š</label>
                <input type="text" id="symbolFilter" placeholder="å¦‚ï¼š000001">
            </div>
            <div class="filter-group">
                <label>å¼€å§‹æ—¥æœŸï¼š</label>
            <input type="date" id="startDate">
        </div>
        <div class="filter-group">
                <label>ç»“æŸæ—¥æœŸï¼š</label>
            <input type="date" id="endDate">
        </div>
        <div class="filter-group">
                <button onclick="loadData()">æŸ¥è¯¢</button>
                <button onclick="resetFilters()">é‡ç½®</button>
            </div>
        </div>
        
        <div class="stats-grid" id="statsGrid"></div>
        
        <div class="section">
            <div class="section-header">
                <h2>æŒä»“å†å²</h2>
            </div>
            <div class="table-container">
                <table id="positionsTable">
                    <thead>
                        <tr>
                            <th>æ¨¡å‹</th>
                            <th>è‚¡ç¥¨ä»£ç </th>
                            <th>æŒä»“æ•°é‡</th>
                            <th>å¹³å‡æˆæœ¬</th>
                            <th>å½“å‰ä»·æ ¼</th>
                            <th class="text-right">æŒä»“å¸‚å€¼</th>
                            <th class="text-right">ç›ˆäºé‡‘é¢</th>
                            <th class="text-right">ç›ˆäºæ¯”ä¾‹</th>
                        </tr>
                    </thead>
                    <tbody id="positionsBody">
                        <tr>
                            <td colspan="8" class="loading">æ­£åœ¨åŠ è½½æ•°æ®...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="section">
            <div class="section-header">
                <h2>äº¤æ˜“å†å²</h2>
            </div>
            <div class="table-container">
                <table id="tradesTable">
                    <thead>
                        <tr>
                            <th>æ—¶é—´</th>
                            <th>æ¨¡å‹</th>
                            <th>è‚¡ç¥¨ä»£ç </th>
                            <th>æ“ä½œ</th>
                            <th class="text-right">æ•°é‡</th>
                            <th class="text-right">ä»·æ ¼</th>
                            <th class="text-right">æˆäº¤é‡‘é¢</th>
                            <th class="text-right">æ‰‹ç»­è´¹</th>
                            <th>ç½®ä¿¡åº¦</th>
                            <th>æŠ•èµ„é£æ ¼</th>
                        </tr>
                    </thead>
                    <tbody id="tradesBody">
                        <tr>
                            <td colspan="10" class="loading">æ­£åœ¨åŠ è½½æ•°æ®...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ä»é…ç½®è·å– API åœ°å€
        const API_BASE = window.API_CONFIG ? window.API_CONFIG.baseUrl : 'http://localhost:4000';
        
        // Socket.IO æœåŠ¡å™¨åœ°å€
        let SOCKET_URL = API_BASE;
        if (!SOCKET_URL.startsWith('http')) {
            SOCKET_URL = `http://${SOCKET_URL}`;
        }
        
        let models = [];
        let socket = null;
        let useSocketIO = false;
        let refreshInterval = null;
        
        // åˆå§‹åŒ–SocketIOè¿æ¥
        function initSocketIO() {
            try {
                if (typeof io !== 'undefined') {
                    socket = io(SOCKET_URL, {
                        reconnection: true,
                        transports: ['websocket', 'polling']
                    });
                    
                    socket.on('connect', function() {
                        useSocketIO = true;
                        console.log('âœ… SocketIOè¿æ¥æˆåŠŸï¼Œportfolioæ•°æ®å°†å®æ—¶æ¨é€');
                        // SocketIOè¿æ¥æˆåŠŸåï¼Œæ¸…é™¤å®šæ—¶åˆ·æ–°
                        if (refreshInterval) {
                            clearInterval(refreshInterval);
                            refreshInterval = null;
                        }
                    });
                    
                    socket.on('disconnect', function() {
                        useSocketIO = false;
                        console.log('âš ï¸ SocketIOè¿æ¥æ–­å¼€ï¼Œå°†ä½¿ç”¨å®šæ—¶åˆ·æ–°');
                        // SocketIOæ–­å¼€åï¼Œå¯ç”¨å®šæ—¶åˆ·æ–°
                        if (!refreshInterval) {
                            refreshInterval = setInterval(function() {
                                loadData();
                            }, 3600000); // 3600ç§’ = 1å°æ—¶
                            console.log('ğŸ“Š å¯ç”¨å®šæ—¶åˆ·æ–°ï¼šæ¯3600ç§’ï¼ˆ1å°æ—¶ï¼‰åˆ·æ–°ä¸€æ¬¡');
                        }
                    });
                    
                    socket.on('connect_error', function(error) {
                        useSocketIO = false;
                        console.warn('âš ï¸ SocketIOè¿æ¥å¤±è´¥ï¼Œå°†ä½¿ç”¨å®šæ—¶åˆ·æ–°:', error);
                        // è¿æ¥å¤±è´¥åï¼Œå¯ç”¨å®šæ—¶åˆ·æ–°
                        if (!refreshInterval) {
                            refreshInterval = setInterval(function() {
                                loadData();
                            }, 3600000); // 3600ç§’ = 1å°æ—¶
                            console.log('ğŸ“Š å¯ç”¨å®šæ—¶åˆ·æ–°ï¼šæ¯3600ç§’ï¼ˆ1å°æ—¶ï¼‰åˆ·æ–°ä¸€æ¬¡');
                        }
                    });
                    
                    // ç›‘å¬portfolioæ›´æ–°äº‹ä»¶
                    socket.on('portfolio_update', function(data) {
                        console.log('ğŸ“Š æ”¶åˆ°portfolioæ›´æ–°æ¨é€:', data);
                        // è‡ªåŠ¨åˆ·æ–°æ•°æ®
                        loadData();
                    });
                } else {
                    console.warn('âš ï¸ SocketIOåº“æœªåŠ è½½ï¼Œå°†ä½¿ç”¨å®šæ—¶åˆ·æ–°');
                }
            } catch (e) {
                console.warn('âš ï¸ SocketIOåˆå§‹åŒ–å¤±è´¥ï¼Œå°†ä½¿ç”¨å®šæ—¶åˆ·æ–°:', e);
            }
        }
        
        // åˆå§‹åŒ–ï¼šåŠ è½½æ¨¡å‹åˆ—è¡¨
        async function init() {
            // åˆå§‹åŒ–SocketIOè¿æ¥
            initSocketIO();
            
            await loadModels();
            await loadData();
            
            // å¦‚æœSocketIOä¸å¯ç”¨ï¼Œå¯ç”¨å®šæ—¶åˆ·æ–°ï¼ˆæ¯3600ç§’ï¼‰
            if (!useSocketIO && !refreshInterval) {
                refreshInterval = setInterval(function() {
                    loadData();
                }, 3600000); // 3600ç§’ = 1å°æ—¶
                console.log('ğŸ“Š å¯ç”¨å®šæ—¶åˆ·æ–°ï¼šæ¯3600ç§’ï¼ˆ1å°æ—¶ï¼‰åˆ·æ–°ä¸€æ¬¡');
            }
        }
        
        async function loadModels() {
            try {
                // å…ˆå°è¯•ä»ç¼“å­˜è·å–æ¨¡å‹åˆ—è¡¨
                if (window.CacheHelper) {
                    const cachedModels = window.CacheHelper.get('models');
                    if (cachedModels && Array.isArray(cachedModels) && cachedModels.length > 0) {
                        models = cachedModels;
                        const select = document.getElementById('modelFilter');
                        select.innerHTML = '<option value="">å…¨éƒ¨æ¨¡å‹</option>';
                        models.forEach(modelName => {
                            const option = document.createElement('option');
                            option.value = modelName;
                            option.textContent = modelName;
                            select.appendChild(option);
                        });
                        // ä½¿ç”¨ç¼“å­˜çš„æ•°æ®ï¼Œä»ç„¶åœ¨åå°æ›´æ–°
                    }
                }
                
                const response = await fetch(`${API_BASE}/api/models`, { mode: 'cors' });
                const result = await response.json();
                if (result.status === 'success' && result.data.length > 0) {
                    models = result.data.map(m => m.name);
                    
                    // ç¼“å­˜æ¨¡å‹åˆ—è¡¨ï¼ˆ1å°æ—¶ï¼‰
                    if (window.CacheHelper) {
                        window.CacheHelper.set('models', models, window.CacheHelper.CACHE_EXPIRY.models);
                    }
                    
                    const select = document.getElementById('modelFilter');
                    select.innerHTML = '<option value="">å…¨éƒ¨æ¨¡å‹</option>';
                    models.forEach(modelName => {
                        const option = document.createElement('option');
                        option.value = modelName;
                        option.textContent = modelName;
                        select.appendChild(option);
                    });
                }
            } catch (error) {
                console.error('åŠ è½½æ¨¡å‹åˆ—è¡¨å¤±è´¥:', error);
            }
        }
        
        async function loadData() {
            const model = document.getElementById('modelFilter').value;
            const symbol = document.getElementById('symbolFilter').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            // åŠ è½½ç»Ÿè®¡æ•°æ®
            await loadStatistics(model);
            
            // åŠ è½½æŒä»“
            await loadPositions(model);
            
            // åŠ è½½äº¤æ˜“å†å²
            await loadTrades(model, symbol, startDate, endDate);
        }
        
        async function loadStatistics(model) {
            try {
                const cacheKey = `statistics_${model || 'all'}`;
                
                // å…ˆå°è¯•ä»ç¼“å­˜è·å–ç»Ÿè®¡æ•°æ®
                if (window.CacheHelper) {
                    const cachedStats = window.CacheHelper.get(cacheKey);
                    if (cachedStats) {
                        const stats = cachedStats;
                        const statsGrid = document.getElementById('statsGrid');
                        statsGrid.innerHTML = `
                            <div class="stat-card">
                                <div class="label">æ€»äº¤æ˜“æ¬¡æ•°</div>
                                <div class="value">${stats.total_trades || 0}</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">ä¹°å…¥æ¬¡æ•°</div>
                                <div class="value">${stats.buy_trades || 0}</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">å–å‡ºæ¬¡æ•°</div>
                                <div class="value">${stats.sell_trades || 0}</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">æ€»æˆäº¤é‡</div>
                                <div class="value">${formatNumber(stats.total_volume || 0)}</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">æ€»æˆäº¤é¢</div>
                                <div class="value">${formatCurrency(stats.total_value || 0)}</div>
                            </div>
                        `;
                        // ä½¿ç”¨ç¼“å­˜æ•°æ®ï¼Œä»ç„¶åœ¨åå°æ›´æ–°
                    }
                }
                
                const url = `${API_BASE}/api/trade_statistics${model ? '?model_name=' + encodeURIComponent(model) : ''}`;
                const response = await fetch(url, { mode: 'cors' });
                const result = await response.json();
                
                if (result.status === 'success' && result.data) {
                    const stats = result.data;
                    
                    // ç¼“å­˜ç»Ÿè®¡æ•°æ®ï¼ˆ5åˆ†é’Ÿï¼‰
                    if (window.CacheHelper) {
                        window.CacheHelper.set(cacheKey, stats, 5 * 60 * 1000);
                    }
                    
                    const statsGrid = document.getElementById('statsGrid');
                    statsGrid.innerHTML = `
                        <div class="stat-card">
                            <div class="label">æ€»äº¤æ˜“æ¬¡æ•°</div>
                            <div class="value">${stats.total_trades || 0}</div>
                        </div>
                        <div class="stat-card">
                            <div class="label">ä¹°å…¥æ¬¡æ•°</div>
                            <div class="value">${stats.buy_trades || 0}</div>
                        </div>
                        <div class="stat-card">
                            <div class="label">å–å‡ºæ¬¡æ•°</div>
                            <div class="value">${stats.sell_trades || 0}</div>
                        </div>
                        <div class="stat-card">
                            <div class="label">æ€»æˆäº¤é‡</div>
                            <div class="value">${formatNumber(stats.total_volume || 0)}</div>
                        </div>
                        <div class="stat-card">
                            <div class="label">æ€»æˆäº¤é¢</div>
                            <div class="value">${formatCurrency(stats.total_value || 0)}</div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
            }
        }
        
        async function loadPositions(model) {
            const body = document.getElementById('positionsBody');
            body.innerHTML = '<tr><td colspan="8" class="loading">æ­£åœ¨åŠ è½½...</td></tr>';
            
            try {
                const url = `${API_BASE}/api/current_positions${model ? '?model_name=' + encodeURIComponent(model) : ''}`;
                const response = await fetch(url, { mode: 'cors' });
                const result = await response.json();
                
                if (result.status === 'success') {
                    if (result.data.length === 0) {
                        body.innerHTML = '<tr><td colspan="8" class="empty">æš‚æ— æŒä»“æ•°æ®</td></tr>';
                        return;
                    }
                    
                    body.innerHTML = result.data.map(pos => `
                        <tr>
                            <td>${pos.model_name}</td>
                            <td>${pos.symbol}</td>
                            <td>${formatNumber(pos.quantity)}</td>
                            <td>${formatCurrency(pos.avg_price)}</td>
                            <td>${formatCurrency(pos.current_price)}</td>
                            <td class="text-right">${formatCurrency(pos.market_value)}</td>
                            <td class="text-right">
                                <span class="${pos.profit_loss >= 0 ? 'badge profit' : 'badge loss'}">
                                    ${formatCurrency(pos.profit_loss)}
                                </span>
                            </td>
                            <td class="text-right">
                                <span class="${pos.profit_loss_pct >= 0 ? 'badge profit' : 'badge loss'}">
                                    ${pos.profit_loss_pct.toFixed(2)}%
                                </span>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    body.innerHTML = `<tr><td colspan="8" class="error">${result.message}</td></tr>`;
                }
            } catch (error) {
                body.innerHTML = `<tr><td colspan="8" class="error">åŠ è½½å¤±è´¥: ${error.message}</td></tr>`;
            }
        }
        
        async function loadTrades(model, symbol, startDate, endDate) {
            const body = document.getElementById('tradesBody');
            body.innerHTML = '<tr><td colspan="10" class="loading">æ­£åœ¨åŠ è½½...</td></tr>';
            
            try {
                const params = new URLSearchParams();
                if (model) params.append('model_name', model);
                if (symbol) params.append('symbol', symbol);
                if (startDate) params.append('start_date', startDate);
                if (endDate) params.append('end_date', endDate);
                params.append('limit', '1000');
                
                const response = await fetch(`${API_BASE}/api/trade_history?${params}`, { mode: 'cors' });
                const result = await response.json();
                
                if (result.status === 'success') {
                    if (result.data.length === 0) {
                        body.innerHTML = '<tr><td colspan="10" class="empty">æš‚æ— äº¤æ˜“è®°å½•</td></tr>';
                        return;
                    }
                    
                    body.innerHTML = result.data.map(trade => {
                        const timestamp = new Date(trade.timestamp);
                        return `
                            <tr>
                                <td>${timestamp.toLocaleString('zh-CN')}</td>
                                <td>${trade.model_name}</td>
                                <td>${trade.symbol}</td>
                                <td><span class="badge ${trade.action === 'BUY' ? 'buy' : 'sell'}">${trade.action === 'BUY' ? 'ä¹°å…¥' : 'å–å‡º'}</span></td>
                                <td class="text-right">${formatNumber(trade.amount)}</td>
                                <td class="text-right">${formatCurrency(trade.price)}</td>
                                <td class="text-right">${formatCurrency(trade.total_value || trade.price * trade.amount)}</td>
                                <td class="text-right">${formatCurrency(trade.commission || 0)}</td>
                                <td>${trade.confidence ? (trade.confidence * 100).toFixed(2) + '%' : '-'}</td>
                                <td>${trade.investment_style || '-'}</td>
                            </tr>
                        `;
                    }).join('');
                } else {
                    body.innerHTML = `<tr><td colspan="10" class="error">${result.message}</td></tr>`;
                }
            } catch (error) {
                body.innerHTML = `<tr><td colspan="10" class="error">åŠ è½½å¤±è´¥: ${error.message}</td></tr>`;
            }
        }
        
        function resetFilters() {
            document.getElementById('modelFilter').value = '';
            document.getElementById('symbolFilter').value = '';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            loadData();
        }
        
        function formatCurrency(value) {
            if (value === null || value === undefined) return 'Â¥0.00';
            return 'Â¥' + parseFloat(value).toLocaleString('zh-CN', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }
        
        function formatNumber(value) {
            if (value === null || value === undefined) return '0';
            return parseFloat(value).toLocaleString('zh-CN');
        }
        
        // æ³¨å†Œ Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('âœ… Service Worker æ³¨å†ŒæˆåŠŸ:', registration.scope);
                        // æ£€æŸ¥æ˜¯å¦æœ‰æ›´æ–°
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log('ğŸ”„ å‘ç° Service Worker æ›´æ–°ï¼Œå°†åœ¨åˆ·æ–°åç”Ÿæ•ˆ');
                                }
                            });
                        });
                    })
                    .catch(function(error) {
                        console.warn('âš ï¸ Service Worker æ³¨å†Œå¤±è´¥:', error);
                    });
                
                // ç›‘å¬ Service Worker æ§åˆ¶æƒå˜æ›´
                let refreshing = false;
                navigator.serviceWorker.addEventListener('controllerchange', () => {
                    if (!refreshing) {
                        refreshing = true;
                        console.log('ğŸ”„ Service Worker å·²æ›´æ–°ï¼Œåˆ·æ–°é¡µé¢...');
                        // å¯é€‰ï¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢ä»¥ä½¿ç”¨æ–°çš„ Service Worker
                        // window.location.reload();
                    }
                });
            });
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
